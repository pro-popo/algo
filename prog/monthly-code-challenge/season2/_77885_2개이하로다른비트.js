/**
 * í•¨ìˆ˜ f(x)ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•œë‹¤.
 * - xë³´ë‹¤ í¬ê³  xì™€ ë¹„íŠ¸ê°€ 1~2ê°œ ë‹¤ë¥¸ ìˆ˜ë“¤ ì¤‘ì—ì„œ ì œì¼ ì‘ì€ ìˆ˜
 *   [EX] f(2) = 3
 *        f(7) = 11
 * @param {*} numbers ì •ìˆ˜ë“¤ì´ ë‹´ê¸´ ë°°ì—´
 * @returns ëª¨ë“  ìˆ˜ë“¤ì— ëŒ€í•˜ì—¬ ê° ìˆ˜ì˜ fê°’
 *
 * ### ë¦¬ë·°
 * - í’€ì´ ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   ë§Œì•½ í•´ë‹¹ ìˆ«ìê°€
 *   - ì§ìˆ˜ì¸ ê²½ìš°,
 *     (ìˆ«ì + 1)ì„ ë°˜í™˜í•œë‹¤.
 *
 *   - í™€ìˆ˜ì¸ ê²½ìš°,
 *     ë¨¼ì € ìˆ«ìë¥¼ 2ì§„ìˆ˜ë¡œ ë³€í™˜í•œë‹¤.
 *     ê·¸ ë‹¤ìŒ, 0ì´ ë§ˆì§€ë§‰ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ìœ„ì¹˜ë¥¼ ì°¾ì•„ì„œ
 *     í•´ë‹¹ ìœ„ì¹˜ë¥¼ 1ë¡œ ë°”ê¾¸ê³ , ê·¸ ë‹¤ìŒ ìœ„ì¹˜ë¥¼ 0ìœ¼ë¡œ ë°”ê¾¼ë‹¤.
 *     ì´ë•Œ, ë§Œì•½ ëª¨ë“  ìˆ«ìê°€ 1ì¸ ê²½ìš°, ë§¨ ì•ì— 0ì„ ì¶”ê°€í•œ ë’¤ ìœ„ ê³¼ì •ì„ ì§„í–‰í•œë‹¤.
 *     ë§ˆì§€ë§‰ìœ¼ë¡œ ìˆ˜ì •í•œ 2ì§„ìˆ˜ë¥¼ 10ì§„ìˆ˜ë¡œ ë³€í™˜í•œ ë’¤ ë°˜í™˜í•œë‹¤.
 *
 * - ë¹„íŠ¸ì˜ ê·œì¹™ì„ í™œìš©í•œ í’€ì´ë²•ì´ë‹¤.
 *   ìˆ«ìê°€ ì§ìˆ˜ì¸ ê²½ìš°,
 *   2 => 0010 , f(2) = 3 => 0011
 *   4 => 0100 , f(4) = 5 => 0101
 *   6 => 0110 , f(6) = 7 => 0111
 *   ìœ„ì²˜ëŸ¼, ì§ìˆ˜ì˜ ìµœí•˜ìœ„ ë¹„íŠ¸ëŠ” ë¬´ì¡°ê±´ 0ì´ë©°,
 *   ìµœí•˜ìœ„ ë¹„íŠ¸ 0ì„ 1ë¡œ ë°”ê¿”ì£¼ë©´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë¹„íŠ¸ê°€ ëœë‹¤.
 *   ì¦‰, í•´ë‹¹ ìˆ«ìë³´ë‹¤ 1ì´ í° ìˆ«ìê°€ ì •ë‹µì´ ëœë‹¤.
 *
 *   ìˆ«ìê°€ í™€ìˆ˜ì¸ ê²½ìš°,
 *   3 => 0011 , f(3) = 5 => 0101
 *   7 => 0111 , f(7) = 11 => 1011
 *   9 => 1001 , f(9) = 13 => 1010
 *   ìœ„ì²˜ëŸ¼, ê°€ì¥ ìµœí•˜ìœ„ì— ìˆëŠ” 0 ë¹„íŠ¸ë¥¼ 1, ê·¸ ë‹¤ìŒ ë¹„íŠ¸ë¥¼ 0ìœ¼ë¡œ ë°”ê¾¸ë©´
 *   ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë¹„íŠ¸ê°€ ëœë‹¤.
 *
 * - ì²˜ìŒì—ëŠ”,
 *   í•´ë‹¹ ìˆ«ìë³´ë‹¤ í° ìˆ«ì ì¤‘,
 *   2ì§„ìˆ˜ë¡œ ë³€í™˜í•œ ë‘ ìˆ«ìë¥¼ ë¹„êµí•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ë¹„íŠ¸ê°€ 2ê°œ ì´í•˜ì¸ ìˆ«ìë¥¼ ì°¾ì•˜ë‹¤.
 *   ê·¸ëŸ¬ë‚˜, í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ 10ë²ˆ/11ë²ˆì—ì„œ ì‹œê°„ì´ˆê³¼ê°€ ë°œìƒí–ˆë‹¤. ğŸ˜‚
 */
function solution(numbers) {
    return numbers.map(f);
}

function f(number) {
    if (isEven(number)) return evenF();
    else return oddF();

    function evenF() {
        return number + 1;
    }

    function oddF() {
        let bit = convertToBinary(number);
        let lastZero = bit.lastIndexOf('0');
        if (lastZero === -1) {
            bit = '0' + bit;
            lastZero = 0;
        }

        const answer = [...bit];
        [answer[lastZero], answer[lastZero + 1]] = [1, 0];

        return convertToDecimal(answer.join(''));
    }
}

function isEven(number) {
    return number % 2 === 0;
}

function convertToDecimal(number) {
    return parseInt(number, 2);
}

function convertToBinary(number) {
    return number.toString(2);
}

/****** TEST CASE *******/

console.log(solution([1, 2, 7, 3]));
console.log(solution([21]));
