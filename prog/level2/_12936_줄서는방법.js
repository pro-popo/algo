/**
 * nëª…ì˜ ì‚¬ëžŒì´ ì¼ë ¬ë¡œ ì¤„ì„ ì„œê³  ìžˆë‹¤.
 * nëª…ì˜ ì‚¬ëžŒë“¤ì—ê²ŒëŠ” ê°ê° 1ë²ˆë¶€í„° në²ˆê¹Œì§€ ë²ˆí˜¸ê°€ ë§¤ê²¨ì ¸ ìžˆë‹¤.
 * nëª…ì´ ì‚¬ëžŒì„ ì¤„ ì„œëŠ” ë°©ë²• ì¤‘, kë²ˆì§¸ ë°©ë²•ì„ ë°˜í™˜í•˜ìž.
 *
 * @param {*} n - ì‚¬ëžŒì˜ ìˆ˜ (~20)
 * @param {*} k - ìžì—°ìˆ˜
 * @returns - ì‚¬ëžŒì„ ë‚˜ì—´í•˜ëŠ” ë°©ë²•ì„ ì‚¬ì „ ìˆœìœ¼ë¡œ ë‚˜ì—´ í–ˆì„ ë•Œì˜ kë²ˆì§¸ ë°©ë²•
 *
 * ### ë¦¬ë·°
 * - í’€ì´ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   íŒ©í† ë¦¬ì–¼ì„ í™œìš©í•˜ì—¬ kë²ˆì§¸ ë°©ë²•ì—ì„œ ê° ìžë¦¿ìˆ˜ì— ì–´ë–¤ ìˆ«ìžê°€ ì˜¤ëŠ”ì§€ ê³„ì‚°í•  ìˆ˜ ìžˆë‹¤.
 *
 *   ë¨¼ì €, n=3ì¼ ê²½ìš° [1,2,3]ì„ ë‚˜ì—´í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   [1,2,3]
 *   [1,3,2]
 *   -------
 *   [2,1,3]
 *   [2,3,1]
 *   -------
 *   [3,1,2]
 *   [3,2,1]
 *
 *   ì´ë•Œ, ë§¨ ì•žì˜ ìˆ«ìžë³„ë¡œ êµ¬ê°„ì„ ë‚˜ëˆ„ë©´
 *   ê°ê° (3!/3), ì¦‰ 2ê°œë¡œ ë‚˜ë‰œë‹¤.
 *   ì—¬ê¸°ì„œ 3!/3ì€ (3-1)!ì™€ ë™ì¼í•˜ë‹¤.
 *   ì¦‰, êµ¬ê°„ë³„ë¡œ ì´ (n-1)!ê°œì”© ë‚˜ë‰˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤.
 *
 *   ìœ„ì˜ ì›ë¦¬ë¥¼ í™œìš©í•˜ì—¬ kë²ˆì§¸ ë°©ë²•ì—ì„œ ê° ì›ì†Œì— ì–´ë–¤ ìˆ«ìžê°€ ì˜¬ ìˆ˜ ìžˆëŠ”ì§€ êµ¬í•  ìˆ˜ ìžˆë‹¤.
 *   arr = [1,2,3]ì´ê³  k=5ì¼ ê²½ìš°, [3,1,2]ì´ë‹¤.
 *   ë¨¼ì € 0ë²ˆì§¸ ì¸ë±ìŠ¤ì˜ ìˆ«ìžê°€ ë¬´ì—‡ì¸ì§€ ì•Œê¸° ìœ„í•´ì„œ
 *   kë¥¼ êµ¬ê°„ë³„ ê°œìˆ˜ë¡œ ë‚˜ëˆˆ ê°’ìœ¼ë¡œ ì•Œ ìˆ˜ ìžˆë‹¤.
 *   ì´ë•Œ, kê°€ ì•„ë‹Œ k-1ë¶€í„° ì‹œìž‘í•œë‹¤.
 *   4 / (arr.length-1)! = 4 / 2! = 2
 *   ì¦‰, 5ë²ˆì§¸ ë°©ë²•ì˜ 0ë²ˆì§¸ ì¸ë±ìŠ¤ì˜ ìˆ«ìžëŠ” [1,2,3]ì˜ 2ë²ˆì§¸ ì¸ë±ìŠ¤ì˜ ìˆ«ìžì´ë‹¤.
 *
 *   ê·¸ë¦¬ê³  këŠ” êµ¬ê°„ë³„ ê°œìˆ˜ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ ê°’ì„ ì €ìž¥í•œë‹¤.
 *   k %= 2! (k = 0)
 *
 *   ë˜í•œ arrì€ 2ë²ˆì§¸ ì¸ë±ìŠ¤ë¥¼ ì œì™¸í•œ ìˆ«ìžë“¤ë¡œ ê°±ì‹ í•œë‹¤. (ì‚¬ìš©í•œ ìˆ«ìž ì œì™¸)
 *   arr = [1,2]
 *
 *   ê·¸ ë‹¤ìŒ, ìœ„ ê³¼ì •ê³¼ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ 1ë²ˆì§¸ ì¸ë±ìŠ¤ë¥¼ êµ¬í•œë‹¤. (k = 0, arr = [1,2], answer = [3])
 *   0 / 1! = 0
 *   ì¦‰, 1ë²ˆì§¸ ì¸ë±ìŠ¤ì˜ ìˆ«ìžëŠ” [1,2]ì˜ 0ë²ˆì§¸ ì¸ë±ìŠ¤ì˜ ìˆ«ìžì´ë‹¤.
 *   k = 0 % 1 = 0
 *   arr = [2]
 *
 *   ë§ˆì§€ë§‰ìœ¼ë¡œ 2ë²ˆì§¸ ì¸ë±ìŠ¤ëŠ”, (k = 0, arr = [2], answer = [3,1])
 *   [2]ì˜ 0ë²ˆì§¸ ì¸ë±ìŠ¤ì˜ ìˆ«ìžê°€ ëœë‹¤.
 *
 *   ìœ„ ê³¼ì •ì„ í†µí•´ kë²ˆì§¸ ë°©ë²•ì˜ ì›ì†Œë“¤ì„ ì°¾ì„ ìˆ˜ ìžˆë‹¤.
 *
 * - ì²˜ìŒì—ëŠ” ìˆœì—´ê³¼ Next Permutationì„ í†µí•´ Kë²ˆì§¸ ë°©ë²•ì„ êµ¬í–ˆì§€ë§Œ,
 *   íš¨ìœ¨ì„± ë¬¸ì œì—ì„œ ì‹œê°„ì´ˆê³¼ê°€ ë°œìƒí–ˆë‹¤. ðŸ˜‚
 *   ê²°êµ­ ì‹œê°„ ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ ëª»í•˜ê³  ë‹¤ë¥¸ í’€ì´ë¥¼ ì°¸ê³ í–ˆë‹¤.
 *   íŒ©í† ë¦¬ì–¼ì„ í†µí•´ ë¬¸ì œë¥¼ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì´ ì •ë§ ì‹ ê¸°í–ˆë‹¤. ðŸ‘
 */

function solution(n, k) {
    const factorial = initFactorial(n);

    let count = k - 1;
    const arr = [...Array(n)].map((_, idx) => idx + 1);
    const answer = [];
    while (arr.length) {
        const numberOfCases = factorial(arr.length - 1);
        const index = Math.floor(count / numberOfCases);
        count %= numberOfCases;

        answer.push(arr[index]);
        arr.splice(index, 1);
    }

    return answer;
}

function initFactorial(n) {
    const dp = Array(n);
    dp[0] = 1;

    for (let i = 1; i <= n; i++) {
        dp[i] = dp[i - 1] * i;
    }

    return number => dp[number];
}

/****** TEST CASE *******/

console.log(solution(3, 5));
