/**
 * ë ˆìŠ¤í† ëž‘ì˜ êµ¬ì¡°ëŠ”,
 * - ì™„ì „ížˆ ë™ê·¸ëž€ ëª¨ì–‘
 * - ì™¸ë¶€ì˜ ì´ ë‘˜ë ˆëŠ” në¯¸í„°
 * - ì™¸ë²½ ëª‡ëª‡ ì§€ì ì€ ì¶”ìœ„ê°€ ì‹¬í•  ê²½ìš° ì†ìƒë  ìˆ˜ ìžˆëŠ” ì·¨ì•½í•œ ì§€ì ì´ ì¡´ìž¬
 *
 * ë”°ë¼ì„œ, ë‚´ë¶€ ê³µì‚¬ ì¤‘ ì·¨ì•½ ì§€ì ë“¤ì´ ì†ìƒë˜ì§€ ì•Šì•˜ëŠ”ì§€ ì£¼ê¸°ì ìœ¼ë¡œ ì ê²€í•´ì•¼í•œë‹¤.
 * ë‹¤ë§Œ, ë¹ ë¥¸ ê³µì‚¬ ì§„í–‰ì„ ìœ„í•´ ì ê²€ ì‹œê°„ì„ 1ì‹œê°„ìœ¼ë¡œ ì œí•œí–ˆë‹¤.
 * ìµœì†Œí•œì˜ ì¹œêµ¬ë“¤ì„ íˆ¬ìž…í•´ ì·¨ì•½ ì§€ì ì„ ì ê²€í•˜ê³ ,
 * ë‚˜ë¨¸ì§€ ì¹œêµ¬ë“¤ì€ ë‚´ë¶€ ê³µì‚¬ë¥¼ ë•ëŠ”ë‹¤.
 *
 * ë ˆìŠ¤í† ëž‘ì˜ ì •ë¶ ë°©í–¥ ì§€ì ì„ 0ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©°,
 * ì·¨ì•½ ì§€ì ì˜ ìœ„ì¹˜ëŠ” ì •ë¶ ë°©í–¥ ì§€ì ìœ¼ë¡œë¶€í„° ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ë–¨ì–´ì§„ ê±°ë¦¬ë¡œ ë‚˜íƒ€ë‚¸ë‹¤.
 * ì¹œêµ¬ë“¤ì€ ì¶œë°œ ì§€ì ë¶€í„° ì‹œê³„ / ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ì™¸ë²½ì„ ë”°ë¼ì„œë§Œ ì´ë™ ê°€ëŠ¥í•˜ë‹¤.
 *
 * @param {*} n ì™¸ë²½ì˜ ê¸¸ì´ (1~200)
 * @param {*} weak ì·¨ì•½ ì§€ì ì˜ ìœ„ì¹˜ê°€ ë‹´ê¸´ ë°°ì—´ (1~15)
 * @param {*} dist ê° ì¹œêµ¬ê°€ 1ì‹œê°„ ë™ì•ˆ ì´ë™í•  ìˆ˜ ìžˆëŠ” ê±°ë¦¬ê°€ ë‹´ê¸´ ë°°ì—´ (1~8)
 * @returns ì·¨ì•½ ì§€ì ì„ ì ê²€í•˜ê¸° ìœ„í•´ ë³´ë‚´ì•¼í•˜ëŠ” ì¹œêµ¬ ìˆ˜ì˜ ìµœì†Œê°’. ë§Œì•½ ì ê²€í•  ìˆ˜ ì—†ë‹¤ë©´, -1 ë°˜í™˜
 *
 * ### ë¦¬ë·°
 * - í’€ì´ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   ë¨¼ì €, 1ï¸âƒ£ì¹œêµ¬ë“¤ì„ íˆ¬ìž…í•˜ëŠ” ëª¨ë“  ë°©ë²•ì„ íƒìƒ‰í•´ì•¼ í•œë‹¤.
 *
 *   [1], [1,2], [2], [2,1]ì™€ ê°™ì´,
 *   "ëª‡ ëª…ì˜ ì¹œêµ¬ë¥¼ íˆ¬ìž…í•  ê²ƒì¸ì§€",
 *   "ì–´ë–¤ ìˆœì„œë¡œ íˆ¬ìž…í•  ê²ƒì¸ì§€"ì— ëŒ€í•œ ëª¨ë“  ê²½ìš°ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤.
 *   ì¦‰, "ìˆœì—´"ë¡œ ëª¨ë“  ê²½ìš°ë¥¼ íƒìƒ‰í•´ ì €ìž¥í•œë‹¤.
 *
 *   íƒìƒ‰ì´ ëë‚œ ë’¤, 2ï¸âƒ£"ë°°ì—´ í¬ê¸°ì— ë”°ë¼ ì˜¤ë¦„ì°¨ìˆœ"ìœ¼ë¡œ ì •ë ¬í•œë‹¤.
 *   ì´ëŠ”, ì ê²€í•  ìˆ˜ ìžˆëŠ” ì¹œêµ¬ ìˆ˜ì˜ ìµœì†Œê°’ì„ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì—
 *   ìˆ˜ê°€ ì ì€ ì¹œêµ¬ë“¤ì„ ë¨¼ì € íˆ¬ìž…í•˜ê³ ìž í•œë‹¤.
 *
 *   ì·¨ì•½ ì§€ì ì„ ì ê²€í•˜ê¸° ì „,
 *   3ï¸âƒ£weakë¥¼ í™•ìž¥í•˜ì—¬ ì›í˜•ì„ ì„ í˜•ìœ¼ë¡œ íŽ¼ì³ì¤€ë‹¤.
 *   ì˜ˆë¡œ, n=5, weak=[1,2,3] ì¸ ê²½ìš° [1,2,3,6,7,8]ìœ¼ë¡œ í™•ìž¥í•  ìˆ˜ ìžˆë‹¤. (ê° ì›ì†Œë¥¼ nìœ¼ë¡œ ë”í•œ ìˆ˜ë“¤ì„ í•©ì³ì¤€ë‹¤.)
 *   ë§Œì•½ 3ì—ì„œ 1ì™€ì˜ ê±°ë¦¬ë¥¼ êµ¬í•  ê²½ìš°, í™•ìž¥ëœ Weakì—ì„œ 6-3ìœ¼ë¡œ êµ¬í•  ìˆ˜ ìžˆë‹¤. ì—¬ê¸°ì„œ 6ì€ (n+1)ì´ë‹¤.
 *   ë”°ë¼ì„œ, ì›í˜•ì— ëŒ€í•´ ìƒê°í•  í•„ìš”ì—†ì´, ì„ í˜•ìœ¼ë¡œ ì‰½ê²Œ íƒìƒ‰í•  ìˆ˜ ìžˆë‹¤.
 *
 *   ë˜í•œ, êµ³ì´ ë°˜ì‹œê³„ ë°©í–¥ì— ëŒ€í•´ ê³ ë ¤í•  í•„ìš”ê°€ ì—†ë‹¤.
 *   1ì—ì„œ 3ìœ¼ë¡œ ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°ëŠ”, 3ì—ì„œ 1ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°ì™€ ë™ì¼í•˜ë‹¤.
 *
 *   ê·¸ ë‹¤ìŒ, ì¹œêµ¬ë¥¼ íˆ¬ìž…í•˜ëŠ” ëª¨ë“  ë°©ë²•ì„ ìˆœíšŒí•˜ì—¬,
 *   4ï¸âƒ£í•´ë‹¹ íˆ¬ìž… ë°©ë²•ìœ¼ë¡œ ëª¨ë“  ì·¨ì•½ ì§€ì ì„ ì ê²€í•˜ëŠ” ê²½ìš°ê°€ ìžˆëŠ”ì§€ ê²€ì‚¬í•œë‹¤.
 *   ì ê²€í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   ëª¨ë“  weakë¥¼ ìˆœíšŒí•˜ì—¬ í•´ë‹¹ Kë²ˆì§¸ weakì—ì„œ ì‹œìž‘í–ˆì„ ë•Œ,
 *   weak[K] ~ weak[K+weak.length]ì˜ ëª¨ë“  weakë¥¼ í•´ë‹¹ íˆ¬ìž… ë°©ë²•ìœ¼ë¡œ ì „ë¶€ ë°©ë¬¸í•  ìˆ˜ ìžˆëŠ”ì§€ ê²€ì‚¬í•œë‹¤.
 *
 *   startì§€ì ë¶€í„° endì§€ì ê¹Œì§€ ië²ˆì§¸ ì¹œêµ¬ë¡œ ë°©ë¬¸í•  ìˆ˜ ìžˆëŠ” ê²½ìš°, ë‹¤ìŒ ì§€ì (end+1)ìœ¼ë¡œ ì´ë™í•œë‹¤.
 *   ë°˜ë©´ ië²ˆì§¸ ì¹œêµ¬ë¡œ ë°©ë¬¸í•  ìˆ˜ ì—†ëŠ” ê²½ìš°, endì§€ì ë¶€í„°ëŠ” i+1ë²ˆì§¸ ì¹œêµ¬ì—ê²Œ ë°°ì •í•œë‹¤.
 *   ì´ë•Œ, weak[K+weak.length]ë¥¼ ë°©ë¬¸í•˜ê¸° ì „ì— ëª¨ë“  ì¹œêµ¬ë¥¼ íŒŒê²¬í•œ ê²½ìš°,
 *   í•´ë‹¹ íˆ¬ìž… ë°©ë²•ìœ¼ë¡œëŠ” ì ê²€í•  ìˆ˜ ì—†ìŒì„ ì˜ë¯¸í•œë‹¤.
 *
 *   ìœ„ì™€ ê°™ì€ ê³¼ì •ìœ¼ë¡œ ëª¨ë“  ì·¨ì•½ ì§€ì ì„ ì ê²€í•  ìˆ˜ ìžˆëŠ” íˆ¬ìž… ë°©ë²•ì„ ì°¾ëŠ”ë‹¤.
 *   ì´ë•Œ, ê°€ìž¥ ë¨¼ì € ì¡°ê±´ì„ ì¶©ì¡±í•˜ëŠ” íˆ¬ìž… ë°©ë²•ì´ ì •ë‹µì´ ëœë‹¤.
 *
 * - distì˜ ê¸¸ì´ê°€ ìµœëŒ€ 8ì´ê¸° ë•Œë¬¸ì— ì™„ì „íƒìƒ‰ìœ¼ë¡œ ì¶©ë¶„ížˆ íƒìƒ‰í•  ìˆ˜ ìžˆë‹¤!
 *
 * - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 5ë²ˆê³¼ 7ë²ˆì´ í‹€ë¦° ì´ìœ ëŠ”,
 *   ì–´ì´ì—†ê²Œë„ Arrayì˜ find ë©”ì„œë“œë¥¼ ìž˜ëª» ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì´ë‹¤.ðŸ˜”
 *   find ë©”ì„œë“œëŠ” ì¡°ê±´ì„ ì¶©ì¡±í•˜ëŠ” ì›ì†Œê°€ ì—†ëŠ” ê²½ìš°, undefinedë¥¼ ë°˜í™˜í•œë‹¤.
 *
 *   ì‹¤ì œë¡œ ì‚¬ìš©í•œ ë‹¤ìŒ ë¡œì§ì—ì„œ,
 *   íŒŒê²¬ë°©ë²•.find(() =>
 *     weak.find((ì‹œìž‘ weak) => ëª¨ë“  wedkë¥¼ ì „ë¶€ ë°©ë¬¸í–ˆëŠ”ê°€?);
 *   );
 *   weak.findê°€ 0ì„ ë°˜í™˜í•˜ëŠ” ê²½ìš°ê°€ ìžˆì—ˆê¸° ë•Œë¬¸ì— í‹€ë ¸ë˜ ê²ƒì´ë‹¤. (weakê°€ 0ì¸ë° ì¡°ê±´ì„ ì¶©ì¡±í•˜ëŠ” ê²½ìš°)
 *   0ì€ falsyí•œ ê°’ì´ê¸° ë•Œë¬¸ì—, íŒŒê²¬ë°©ë²•.findì—ì„œ 0ì„ falseë¡œ íŒë‹¨í•˜ëŠ” ê²ƒì´ë‹¤. ðŸ¤¬
 *   ì´ì— ëŒ€í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´, find ëŒ€ì‹  someìœ¼ë¡œ ìˆ˜ì •í–ˆë‹¤.
 *
 *   ... í—ˆë¬´í•˜ë‹¤...ðŸ˜© ë°”ë³´ê°™ë‹¤...ðŸ˜­
 *
 */

function solution(n, weak, dist) {
    const candidates = createCandidates(dist.length).sort(
        (a, b) => a.length - b.length,
    );

    const extendedWeak = [...weak, ...weak.map(w => w + n)];
    const answer = candidates.find(startCheckWeak);

    return answer ? answer.length : -1;

    function startCheckWeak(candidate) {
        const candidateDist = candidate.map(id => dist[id]);
        const isSuccessCheck = weak.some((_, firstWeakId) =>
            isCheckedAllWeak(candidateDist, firstWeakId),
        );
        return isSuccessCheck;
    }

    function isCheckedAllWeak(candidateDist, firstWeakId) {
        let candidateId = 0;
        let [startWeakId, endWeakId] = [firstWeakId, firstWeakId];

        while (!isCheckedLastWeak()) {
            if (candidateId === candidateDist.length) return false;

            if (isNotEnoughDistance()) {
                startWeakId = endWeakId;
                candidateId++;
                continue;
            }

            endWeakId++;
        }
        return true;

        function isCheckedLastWeak() {
            return endWeakId === firstWeakId + weak.length;
        }

        function isNotEnoughDistance() {
            return (
                extendedWeak[endWeakId] - extendedWeak[startWeakId] >
                candidateDist[candidateId]
            );
        }
    }
}

function createCandidates(maxId) {
    const candidates = [];
    permutation(new Set());
    return candidates;

    function permutation(candidate) {
        if (candidate.size) candidates.push([...candidate]);

        for (let id = 0; id < maxId; id++) {
            if (candidate.has(id)) continue;

            candidate.add(id);
            permutation(candidate);
            candidate.delete(id);
        }
    }
}

/****** TEST CASE *******/

console.log(solution(12, [1, 5, 6, 10], [1, 2, 3, 4]));
console.log(solution(12, [1, 3, 4, 9, 10], [3, 5, 7]));
