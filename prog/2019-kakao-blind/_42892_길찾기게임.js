/**
 * ì´ ê²Œì„ì€, ë‘ íŒ€ì´ ê°™ì€ ê³³ì„ ë‹¤ë¥¸ ìˆœì„œë¡œ ë°©ë¬¸í•˜ì—¬ ë¨¼ì € ìˆœíšŒë¥¼ ë§ˆì¹œ íŒ€ì´ ìŠ¹ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.
 * ë°©ë¬¸í•  ê³³ì˜ 2ì°¨ì› ì¢Œí‘œ ê°’ì„ êµ¬í•˜ê³ , ê° ì¥ì†Œë¥¼ ì´ì§„íŠ¸ë¦¬ì˜ ë…¸ë“œê°€ ë˜ë„ë¡ êµ¬ì„±í•œ í›„
 * ìˆœíšŒ ë°©ë²•ì„ íŒíŠ¸ë¡œ ì£¼ì–´ ê° íŒ€ì´ ìŠ¤ìŠ¤ë¡œ ê²½ë¡œë¥¼ ì°¾ë„ë¡ í•  ê³„íšì´ë‹¤.
 *
 * ì•„ë˜ì™€ ê°™ì€ ê·œì¹™ìœ¼ë¡œ íŠ¸ë¦¬ ë…¸ë“œë¥¼ êµ¬ì„±í•œë‹¤.
 * - ëª¨ë“  ë…¸ë“œëŠ” ì„œë¡œ ë‹¤ë¥¸ x ì¢Œí‘œë¥¼ ê°€ì§„ë‹¤.
 * - ê°™ì€ ë ˆë²¨ì— ìˆëŠ” ë…¸ë“œëŠ” ê°™ì€ y ì¢Œí‘œë¥¼ ê°€ì§„ë‹¤.
 * - íŠ¹ì • ë…¸ë“œì˜ ì™¼ìª½ ì„œë¸Œ íŠ¸ë¦¬ì— ìˆëŠ” ëª¨ë“  ë…¸ë“œì˜ xê°’ì€ í•´ë‹¹ ë…¸ë“œì˜ xê°’ë³´ë‹¤ ì‘ë‹¤.
 * - íŠ¹ì • ë…¸ë“œì˜ ì˜¤ë¥¸ìª½ ì„œë¸Œ íŠ¸ë¦¬ì— ìˆëŠ” ëª¨ë“  ë…¸ë“œì˜ xê°’ì€ í•´ë‹¹ ë…¸ë“œì˜ xê°’ë³´ë‹¤ í¬ë‹¤.
 *
 * @param {*} nodeinfo ì´ì§„íŠ¸ë¦¬ë¥¼ êµ¬ì„±í•˜ëŠ” ë…¸ë“œë“¤ì˜ ì¢Œí‘œ (1 ~ 10_000)
 *                     ë…¸ë“œ: 1~10_000 | íŠ¸ë¦¬ ê¹Šì´: 1_000 ì´í•˜
 * @returns ì´ì§„íŠ¸ë¦¬ë¥¼ ì „ìœ„ ìˆœíšŒ, í›„ìœ„ ìˆœíšŒí•œ ê²°ê³¼
 *
 * ### ë¦¬ë·°
 * - í’€ì´ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   ë¨¼ì €, ì£¼ì–´ì§„ nodeinfoë¥¼ ê°€ì§€ê³  íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ í˜•ì„±í•œë‹¤.
 *   ê·¸ ë‹¤ìŒ, ìµœìƒìœ„ ë…¸ë“œë¶€í„° ì‹œì‘í•˜ì—¬ ì „ìœ„ ìˆœíšŒì™€ í›„ì™¸ ìˆœíšŒë¥¼ ì§„í–‰í•œë‹¤.
 *   ê° ìˆœíšŒì— ëŒ€í•œ ê²°ê³¼ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
 *
 *   íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ í˜•ì„±í•˜ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   ë¨¼ì € nodeinfoë¥¼ ìˆœíšŒí•˜ì—¬ ê°ê°ì˜ ë…¸ë“œë¥¼ ìƒì„±í•œë‹¤.
 *   ìƒì„±í•œ ë…¸ë“œë“¤ì„ y(ë ˆë²¨)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•œë‹¤. (nodes)
 *   ì´ë•Œ ê°€ì¥ ë§¨ ì•ì— ìˆëŠ” ë…¸ë“œ(nodes[0])ê°€ ìµœìƒìœ„ ë…¸ë“œê°€ ëœë‹¤.
 *
 *   ìµœìƒìœ„ ë…¸ë“œë¶€í„° ì‹œì‘í•˜ì—¬, ëª¨ë“  ë…¸ë“œë¥¼ ìˆœíšŒí•œë‹¤.
 *   ì´ ìˆœíšŒ ê³¼ì •ì—ì„œ í•´ë‹¹ ë…¸ë“œì˜ ìì‹ ë…¸ë“œë“¤(ì™¼ìª½/ì˜¤ë¥¸ìª½ ìì‹ ë…¸ë“œ)ì„ ì°¾ëŠ”ë‹¤.
 *   ì´ë•Œ, íŠ¹ì • ë…¸ë“œì˜ ìì‹ ë…¸ë“œë“¤ì€ ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤.
 *   - ìì‹ ë…¸ë“œë“¤ì€ ë¶€ëª¨ ë…¸ë“œë³´ë‹¤ y(ë ˆë²¨)ì´ ë‚®ì•„ì•¼ í•œë‹¤.
 *   - ìì‹ ë…¸ë“œë“¤ì€ ìœ íš¨í•œ x ë²”ìœ„ ë‚´ì— ì¡´ì¬í•´ì•¼ í•œë‹¤.
 *     íŠ¹ì • ë…¸ë“œì˜ [ì™¼ìª½/ì˜¤ë¥¸ìª½] ì„œë¸Œ íŠ¸ë¦¬ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  ë…¸ë“œì˜ xê°’ì´ íŠ¹ì • ë…¸ë“œë³´ë‹¤ [ì‘ì•„ì•¼/ì»¤ì•¼]í•œë‹¤.
 *     ì¦‰, ìƒìœ„ ë…¸ë“œë“¤ì˜ xê°’ì— ë”°ë¼ ìì‹ ë…¸ë“œê°€ ìœ„ì¹˜í•  ìˆ˜ ìˆëŠ” xì˜ ë²”ìœ„ë¥¼ êµ¬í•´ì•¼ í•œë‹¤.
 *     ì´ëŠ” ë¶€ëª¨ ë…¸ë“œì˜ ìì‹ ë…¸ë“œì— ëŒ€í•œ xì˜ ì œí•œ ë²”ìœ„ë¥¼ í™œìš©í•˜ì—¬ êµ¬í•  ìˆ˜ ìˆë‹¤.
 *
 *   nodesë¥¼ ìˆœíšŒí•˜ì—¬ ìœ„ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”, ìµœì´ˆì˜ [ì™¼ìª½/ì˜¤ë¥¸ìª½] ìì‹ ë…¸ë“œë¥¼ ì°¾ìœ¼ë©´ ëœë‹¤.
 *   ì¦‰, ìœ„ì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ì„œ ê·¸ ì¤‘ ê°€ì¥ y(ë ˆë²¨)ê°€ ë†’ì€ ë…¸ë“œë¥¼ ì°¾ìœ¼ë©´ ëœë‹¤. (ë¶€ëª¨ ë…¸ë“œì™€ ê°€ì¥ ê°€ê¹Œìš´ ìì‹ ë…¸ë“œ)
 *
 *   ë¬¸ì œì—ì„œ ì£¼ì–´ì§„ ì˜ˆì‹œë¡œ ì‚´í´ë³´ì.
 *   yë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœì„ í•˜ë©´, ìµœìƒìœ„ ë…¸ë“œëŠ” 7ë²ˆ ë…¸ë“œ([8,6])ê°€ ëœë‹¤.
 *   ì´ë•Œ, 7ë²ˆì˜ ìì‹ ë…¸ë“œë“¤ì— ëŒ€í•œ xì˜ ì œí•œ ë²”ìœ„ëŠ” [ìµœì†Œ xê°’ - 1, ìµœëŒ€ xê°’ + 1],
 *   ì¦‰ [-1, 100_001]ì´ë‹¤.
 *
 *   ì´ë¥¼ í™œìš©í•˜ì—¬ [ì™¼ìª½/ì˜¤ë¥¸ìª½] ìì‹ ë…¸ë“œë¥¼ ì°¾ì•„ë³´ì.
 *   ë¨¼ì €, 7ë²ˆ ë…¸ë“œë³´ë‹¤ yê°’ì´ ì‘ì•„ì•¼ í•œë‹¤.
 *   ê·¸ë¦¬ê³  7ë²ˆ ë…¸ë“œì˜ [ì™¼ìª½/ì˜¤ë¥¸ìª½] ìì‹ ë…¸ë“œëŠ” 7ë²ˆ ë…¸ë“œë³´ë‹¤ [ì™¼ìª½/ì˜¤ë¥¸ìª½]ì— ìœ„ì¹˜í•´ì•¼ í•œë‹¤.
 *   ë”°ë¼ì„œ ì™¼ìª½ ìì‹ ë…¸ë“œì˜ xê°’ì€ [-1, 8(7ë²ˆ ë…¸ë“œì˜ xê°’)] ë²”ìœ„ ë‚´ì— ì¡´ì¬í•´ì•¼ í•˜ë©°,
 *   ì˜¤ë¥¸ìª½ ìì‹ ë…¸ë“œì˜ xê°’ì€ [8(7ë²ˆ ë…¸ë“œì˜ xê°’), 100_001] ë²”ìœ„ ë‚´ì— ì¡´ì¬í•´ì•¼ í•œë‹¤.
 *
 *   nodesë¥¼ ìˆœíšŒí•˜ì—¬, ìœ„ì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìµœì´ˆì˜ [ì™¼ìª½/ì˜¤ë¥¸ìª½] ìì‹ ë…¸ë“œë¥¼ ê°ê° ì°¾ìœ¼ë©´ ëœë‹¤.
 *   ì¦‰, ìœ„ì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ì„œ yê°’ì´ ê°€ì¥ ë†’ì€ ë…¸ë“œë¥¼ ì°¾ëŠ”ë‹¤.
 *   ì´ë•Œ, 7ë²ˆ ë…¸ë“œì˜ ì™¼ìª½ ìì‹ ë…¸ë“œëŠ” 4ë²ˆ ë…¸ë“œ([3,5])ê°€ ë˜ë©°,
 *   ì˜¤ë¥¸ìª½ ìì‹ ë…¸ë“œëŠ” 2ë²ˆ ë…¸ë“œ([11,5])ê°€ ëœë‹¤.
 *
 *   ì´ì— ë”°ë¼ ê° 4ë²ˆê³¼ 2ë²ˆ ë…¸ë“œì˜ ìì‹ ë…¸ë“œë“¤ì— ëŒ€í•œ xì˜ ì œí•œ ë²”ìœ„ë¥¼ ì—…ë°ì´íŠ¸ í•´ì¤€ë‹¤.
 *   - 4ë²ˆ ë…¸ë“œì˜ ìì‹ ë…¸ë“œì— ëŒ€í•œ xì˜ limit = [-1, 8]
 *   - 2ë²ˆ ë…¸ë“œì˜ ìì‹ ë…¸ë“œì— ëŒ€í•œ xì˜ limit = [8, 100_001]
 *
 *   ê·¸ ë‹¤ìŒ ê³¼ì •ì—ì„œ 4ë²ˆ ë…¸ë“œì˜ ìì‹ ë…¸ë“œë¥¼ êµ¬í•˜ê²Œ ëœë‹¤ë©´,
 *   4ë²ˆ ë…¸ë“œì˜ ì™¼ìª½ ìì‹ ë…¸ë“œì˜ xê°’ ë²”ìœ„ëŠ” [-1, 3]
 *   4ë²ˆ ë…¸ë“œì˜ ì˜¤ë¥¸ìª½ ìì‹ ë…¸ë“œì˜ xê°’ ë²”ìœ„ëŠ” [3, 8]ì´ ëœë‹¤.
 *
 *   ìœ„ ê³¼ì •ì„ ë”°ë¼ ëª¨ë“  ë…¸ë“œì˜ ìˆœíšŒë¥¼ ë§ˆì¹œë‹¤ë©´, ì™„ë²½í•œ íŠ¸ë¦¬ë¥¼ í˜•ì„±í•  ìˆ˜ ìˆë‹¤.
 *
 * - ë‹¤ë¥¸ í’€ì´ ë°©ì‹ìœ¼ë¡œëŠ”,
 *   íŠ¸ë¦¬ë¥¼ í˜•ì„±í•  ë•Œ ì¬ê·€ë¥¼ í™œìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.
 *   ë¨¼ì €, ë…¸ë“œë¥¼ yë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•œë‹¤. (nodes)
 *   ì´ë•Œ nodes[0]ëŠ” ìµœìƒìœ„ ë…¸ë“œì´ë‹¤.
 *
 *   nodesë¥¼ ìˆœíšŒí•˜ì—¬,
 *   ìµœìƒìœ„ ë…¸ë“œì— ë‚˜ë¨¸ì§€ ë…¸ë“œë“¤ì„ ìˆœì„œëŒ€ë¡œ ì—°ê²°í•œë‹¤.
 *   ìµœìƒìœ„ ë…¸ë“œì— íŠ¹ì • ë…¸ë“œë¥¼ ì—°ê²°í•˜ëŠ” ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   - ë¶€ëª¨ ë…¸ë“œì™€ íŠ¹ì • ë…¸ë“œì˜ xê°’ì„ ë¹„êµí•œë‹¤.
 *     ë§Œì•½ ìì‹ ë…¸ë“œì˜ xê°’ì´ ë” ì‘ì„ ê²½ìš°, ë¶€ëª¨ ë…¸ë“œì˜ ì™¼ìª½ ìì‹ ë…¸ë“œì— ì¶”ê°€í•œë‹¤.
 *     ë§Œì•½ ìì‹ ë…¸ë“œì˜ xê°’ì´ ë” í´ ê²½ìš°, ë¶€ëª¨ ë…¸ë“œì˜ ì˜¤ë¥¸ìª½ ìì‹ ë…¸ë“œì— ì¶”ê°€í•œë‹¤.
 *
 *     ì´ë•Œ, ì´ë¯¸ í•´ë‹¹ ìë¦¬ì— ë‹¤ë¥¸ ë…¸ë“œê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°,
 *     ì¬ê·€ë¥¼ í†µí•´ í•´ë‹¹ ë…¸ë“œì˜ ìì‹ ë…¸ë“œë¡œ ì—°ê²°ì„ ì‹œë„í•œë‹¤.
 *
 *     ë¹ˆ ìë¦¬ê°€ ìƒê¸¸ ë•Œê¹Œì§€ ìœ„ ê³¼ì •ì„ ë°˜ë³µí•œë‹¤.
 *
 *   ì´ ë°©ë²•ì´ í›¨ì”¬ íš¨ìœ¨ì ì´ê³  ë¹ ë¥´ë‹¤! ğŸ‘
 *   ì´ì— ëŒ€í•œ ì½”ë“œëŠ” otherCase_CreateTree í•¨ìˆ˜ì—ì„œ ì‚´í´ë³¼ ìˆ˜ ìˆë‹¤!
 */

function solution(nodeinfo) {
    const root = createTree(nodeinfo);
    return [preorderTraverse, postorderTraverse].map(traverse =>
        traverse(root, []),
    );
}

function createTree(nodeinfo) {
    const nodes = nodeinfo
        .map((point, number) => new Node(point, number + 1))
        .sort((node, otherNode) => otherNode.y - node.y);

    const LIMIT_X = [-1, 100_001];
    const limit = Array.from(Array(nodes.length + 1), () => LIMIT_X);

    nodes.forEach(parent => {
        const parentLimit = limit[parent.number];
        const childsLimit = [
            [parentLimit[0], parent.x],
            [parent.x, parentLimit[1]],
        ];

        const childs = childsLimit.map(limit => findChild(parent, limit));

        parent.setChilds(childs);
        childs.forEach((child, index) => {
            if (!child) return;
            limit[child.number] = childsLimit[index];
        });
    });

    return nodes[0];

    function findChild(node, limit) {
        return nodes.find(
            child =>
                child.y < node.y && child.x > limit[0] && child.x < limit[1],
        );
    }
}

function preorderTraverse(node, visited) {
    if (!node) return;
    visited.push(node.number);
    node.childs.forEach(child => preorderTraverse(child, visited));
    return visited;
}

function postorderTraverse(node, visited) {
    if (!node) return;
    node.childs.forEach(child => postorderTraverse(child, visited));
    visited.push(node.number);
    return visited;
}

class Node {
    childs = [null, null];

    constructor(point, number) {
        this.point = point;
        this.number = number;
    }

    get x() {
        return this.point[0];
    }

    get y() {
        return this.point[1];
    }

    setChilds(childs) {
        this.childs = childs;
    }
}

function otherCase_CreateTree(nodeinfo) {
    const nodes = nodeinfo
        .map((point, number) => new Node(point, number + 1))
        .sort((node, otherNode) => otherNode.y - node.y);

    const root = nodes[0];
    nodes.forEach(child => {
        if (root === child) return;
        connectNode(root, child);
    });

    return root;

    function connectNode(parent, child) {
        if (parent.x > child.x) {
            if (!parent.childs[0]) {
                parent.childs[0] = child;
                return;
            }
            connectNode(parent.childs[0], child);
        }

        if (parent.x < child.x) {
            if (!parent.childs[1]) {
                parent.childs[1] = child;
                return;
            }
            connectNode(parent.childs[1], child);
        }
    }
}

/****** TEST CASE *******/

console.log(
    solution([
        [5, 3],
        [11, 5],
        [13, 3],
        [3, 5],
        [6, 1],
        [1, 3],
        [8, 6],
        [7, 2],
        [2, 2],
    ]),
);

console.log(
    solution([
        [5, 3],
        [11, 5],
        [13, 3],
        [6, 0],
        [8, 6],
        [7, 2],
        [0, 0],
    ]),
);
