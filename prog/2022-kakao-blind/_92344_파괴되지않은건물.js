/**
 * ì ì˜ ê³µê²© / ì•„êµ°ì˜ íšŒë³µ ìŠ¤í‚¬ ì´í›„, íŒŒê´´ë˜ì§€ ì•Šì€ ê±´ë¬¼ì„ ì°¾ìž.
 *
 * N*M í¬ê¸°ì˜ ë§µì—ëŠ” ë‚´êµ¬ë„ë¥¼ ê°€ì§„ ê±´ë¬¼ì´ ê° ì¹¸ë§ˆë‹¤ í•˜ë‚˜ì”© ìžˆë‹¤.
 * ê±´ë¬¼ì€ ì ì˜ ê³µê²©ì„ ë°›ìœ¼ë©´ ë‚´êµ¬ë„ê°€ ê°ì†Œí•˜ê³ ,
 * ë‚´êµ¬ë„ê°€ 0ì´í•˜ê°€ ë˜ë©´ íŒŒê´´ëœë‹¤. (ë‹¨, ì´ë¯¸ íŒŒê´´ëœ ê±´ë¬¼ë„ ê³„ì† ë‚´êµ¬ë„ê°€ í•˜ë½/ìƒìŠ¹ë  ìˆ˜ ìžˆë‹¤)
 * ì•„êµ°ì€ íšŒë³µ ìŠ¤í‚¬ì„ ì‚¬ìš©í•˜ì—¬ ê±´ë¬¼ì˜ ë‚´êµ¬ë„ë¥¼ ë†’ì¼ ìˆ˜ ìžˆë‹¤.
 *
 * @param {*} board ê±´ë¬¼ì˜ ë‚´êµ¬ë„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” 2ì°¨ì› ì •ìˆ˜ ë°°ì—´ (1~1_000)
 * @param {*} skill ì ì˜ ê³µê²© í˜¹ì€ ì•„êµ°ì˜ íšŒë³µ ìŠ¤í‚¬ì„ ë‚˜íƒ€ë‚´ëŠ” 2ì°¨ì› ì •ìˆ˜ ë°°ì—´ (1~250_000)
 *                  [type, r1, c1, r2, c2, degree] => type: 1(ê³µê²©) 2(íšŒë³µ)
 * @returns ì ì˜ ê³µê²© í˜¹ì€ ì•„êµ°ì˜ íšŒë³µ ìŠ¤í‚¬ì´ ëª¨ë‘ ëë‚œ ë’¤, íŒŒê´´ë˜ì§€ ì•Šì€ ê±´ë¬¼ì˜ ê°œìˆ˜
 *
 * ### ë¦¬ë·°
 * - í’€ì´ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   ë¨¼ì €, ìŠ¤í‚¬ì— ëŒ€í•œ ë²”ìœ„ë¥¼ í•˜ë‚˜ì˜ 2ì°¨ì› ë°°ì—´ë¡œ í•©ì¹œë‹¤.
 *   ë§Œì•½, 0ë²ˆì§¸ ì›ì†Œë¶€í„° 2ë²ˆì§¸ ì›ì†Œê¹Œì§€ -në§Œí¼ ë³€í™”ë¥¼ ì£¼ì–´ì•¼ í•œë‹¤ë©´,
 *   n 0 0 -n
 *   0 0 0 0
 *   0 0 0 0
 *   -n 0 0 n
 *   ì™€ ê°™ì´ ì ìš©ì‹œí‚¨ë‹¤.
 *
 *   ê·¸ ë‹¤ìŒ, ëˆ„ì í•©ì„ ì´ìš©í•˜ì—¬ ê° ì›ì†Œë§ˆë‹¤ ì–´ëŠ ì •ë„ì˜ ë³€í™”ë¥¼ ì£¼ì–´ì•¼ í•˜ëŠ”ì§€ ê³„ì‚°í•œë‹¤.
 *   2ì°¨ì› ë°°ì—´ì¸ ê²½ìš°, ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ëˆ„ì í•©ì„ êµ¬í•œ ë’¤, ìœ„ìª½ì—ì„œ ì•„ëž˜ìª½ìœ¼ë¡œ ëˆ„ì í•©ì„ êµ¬í•˜ë©´ ëœë‹¤.
 *   n n n 0
 *   n n n 0
 *   n n n 0
 *   0 0 0 0
 *
 *   ìœ„ì—ì„œ ê³„ì‚°í•œ ë°°ì—´ì„ ê°€ì§€ê³  ê±´ë¬¼ì˜ ë‚´êµ¬ë„ë¥¼ ë³€í™” ì‹œí‚¨ í›„,
 *   íŒŒê´´ë˜ì§€ ì•Šì€ ê±´ë¬¼ì˜ ìˆ˜ë¥¼ ì„¼ë‹¤.
 *
 * - ì²˜ìŒ ì ‘ê·¼í–ˆë˜ í’€ì´ ë°©ì‹ì€,
 *   ë§Œì•½, 0ë²ˆì§¸ ì›ì†Œë¶€í„° 2ë²ˆì§¸ ì›ì†Œê¹Œì§€ -në§Œí¼ ë³€í™”ë¥¼ ì£¼ì–´ì•¼ í•  ë•Œ
 *   n 0 0 -n
 *   n 0 0 -n
 *   n 0 0 -n
 *   0 0 0 0
 *   ìœ„ì™€ ê°™ì´ ìŠ¤í‚¬ì— ëŒ€í•œ ë²”ìœ„ë¥¼ í•©ì³¤ë‹¤.
 *
 *   ì´ë¥¼ ëˆ„ì í•©ì„ ì ìš©í•˜ì—¬
 *   n n n 0
 *   n n n 0
 *   n n n 0
 *   0 0 0 0
 *   ì™€ ê°™ì€ í˜•íƒœë¡œ ë§Œë“¤ì—ˆë‹¤.
 *
 *   ì¢‹ì€ ì ‘ê·¼ì´ë¼ ìƒê°í•´ì„œ ì‹ ë‚˜ê²Œ ì½”ë“œë¥¼ ìž‘ì„±í•˜ë‹¤ê°€,
 *   ì‹œê°„ì´ˆê³¼ê°€ ë‚˜ëŠ” ê±¸ ë³´ê³  ì¢Œì ˆí•´ë²„ë ¸ë‹¤.. ðŸ˜­
 *
 *   í•˜ë‚˜ì”© ìŠ¤í‚¬ì„ ì ìš©í•˜ëŠ” ê²½ìš°, O(N*M*K)ì˜ ë³µìž¡ë„ë¥¼ ê°€ì§„ë‹¤.
 *   ì´ë¥¼ ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ O(N*K)ì˜ ë³µìž¡ë„ë¡œ ì¤„ì¼ ìˆ˜ ìžˆì§€ë§Œ,
 *   ìµœì•…ì˜ ê²½ìš° 1_000 * 250_000 = 250_000_000 ì´ë‹¤.
 *
 *   n 0 0 -n
 *   0 0 0 0
 *   0 0 0 0
 *   -n 0 0 n
 *   ì™€ ê°™ì€ í˜•íƒœë¡œ ë§Œë“¤ë©´,
 *   í–‰, ì—´ì— ëŒ€í•œ ëˆ„ì í•©ì„ ì§„í–‰í•  ë•Œ O(N*M)ì´ë¯€ë¡œ,
 *   ìµœì¢…ì ìœ¼ë¡œ O(K+N*M)ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìžˆë‹¤.
 *
 * - ì‚¬ì‹¤ ë‚´ê°€ ì ‘ê·¼í•œ í’€ì´ë²•ì´ ëˆ„ì í•©ì¸ì§€ë„ ëª°ëžë‹¤..! ðŸ˜…
 *   ê²°êµ­ ë‹µì§€ë¥¼ ì°¸ê³ í–ˆì§€ë§Œ, ìž¬ë°ŒëŠ” ë¬¸ì œì˜€ë‹¤.
 *   ì´ëŸ° ì‹ìœ¼ë¡œ ëˆ„ì í•©ì„ ì‚¬ìš©í•˜ëŠ”êµ¬ë‚˜. ìƒˆë¡­ê²Œ ë°°ìš°ê²Œ ëë‹¤! ðŸ‘
 *
 */

function solution(board, skill) {
    const skills = combineSkillsRanges(skill);
    prefixSum(skills);

    usingSkills(board, skills);
    return countUndestroyedBuilding(board);
}

const [ROW, COLUWN] = [1000, 1000];
function combineSkillsRanges(skill) {
    const skills = Array.from(Array(ROW + 1), () => Array(COLUWN + 1).fill(0));

    skill.forEach(([type, r1, c1, r2, c2, degree]) => {
        type === 1 && (degree = -degree);
        skills[r1][c1] += degree;
        skills[r1][c2 + 1] += -degree;
        skills[r2 + 1][c1] += -degree;
        skills[r2 + 1][c2 + 1] += degree;
    });
    return skills;
}

function prefixSum(skills) {
    leftToRight(skills);
    topToBottom(skills);
}

function leftToRight(skills) {
    for (let i = 0; i <= ROW; i++) {
        for (let j = 0; j <= COLUWN; j++) {
            skills[i][j] += skills[i][j - 1] || 0;
        }
    }
}

function topToBottom(skills) {
    for (let j = 0; j <= COLUWN; j++) {
        for (let i = 0; i <= ROW; i++) {
            if (i - 1 >= 0) skills[i][j] += skills[i - 1][j];
        }
    }
}

function usingSkills(board, skills) {
    board.forEach((_, r) => {
        board[r].forEach((_, c) => {
            board[r][c] += skills[r][c];
        });
    });
}

function countUndestroyedBuilding(board) {
    return board.reduce(
        (totalBuilding, _, r) =>
            totalBuilding + board[r].filter((_, c) => board[r][c] > 0).length,
        0,
    );
}

console.log(
    solution(
        [
            [5, 5, 5, 5, 5],
            [5, 5, 5, 5, 5],
            [5, 5, 5, 5, 5],
            [5, 5, 5, 5, 5],
        ],
        [
            [1, 0, 0, 3, 4, 4],
            [1, 2, 0, 2, 3, 2],
            [2, 1, 0, 3, 1, 2],
            [1, 0, 1, 3, 3, 1],
        ],
    ),
);
