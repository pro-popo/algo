/**
 * ê¶Œíˆ¬ ê²½ê¸°ëŠ” 1ëŒ€ 1ë°©ì‹ìœ¼ë¡œ ì§„í–‰ëœë‹¤.
 * ì‹¬íŒì€ ì£¼ì–´ì§„ ê²½ê¸° ê²°ê³¼ë¥¼ ê°€ì§€ê³  ì„ ìˆ˜ë“¤ì˜ ìˆœìœ„ë¥¼ ë§¤ê¸´ë‹¤.
 * í•˜ì§€ë§Œ, ëª‡ëª‡ ê²½ê¸° ê²°ê³¼ë¥¼ ë¶„ì‹¤í•˜ì—¬ ì •í™•í•˜ê²Œ ìˆœìœ„ë¥¼ ë§¤ê¸¸ ìˆ˜ ì—†ë‹¤.
 *
 * @param {*} n ì„ ìˆ˜ì˜ ìˆ˜ (1~100)
 * @param {*} results ê²½ê¸° ê²°ê³¼ë¥¼ ë‹´ì€ 2ì°¨ì› ë°°ì—´ [ì´ê¸´ì‚¬ëžŒ, ì§„ì‚¬ëžŒ]
 * @returns ì •í™•í•˜ê²Œ ìˆœìœ„ë¥¼ ë§¤ê¸¸ ìˆ˜ ìžˆëŠ” ì„ ìˆ˜ì˜ ìˆ˜
 *
 *
 * ### ë¦¬ë·°
 * - í’€ì´ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
 *   ë¨¼ì €, ìŠ¹ë¦¬ ì—¬ë¶€ë¥¼ ì €ìž¥í•˜ê¸° ìœ„í•œ N*N í˜•íƒœì˜ ë°°ì—´(winners)ì„ ìƒì„±í•œë‹¤.
 *   ê·¸ ë‹¤ìŒ, í”Œë¡œì´ë“œ-ì›Œì…œ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ìˆœìœ„(ìŠ¹ë¦¬ ì—¬ë¶€)ë¥¼ ë§¤ê¸´ë‹¤.
 *
 *   í”Œë¡œì´ë“œ-ì›Œì…œì€ ëª¨ë“  ì •ì ì˜ ìµœë‹¨ ê²½ë¡œë¥¼ êµ¬í•˜ê¸° ìœ„í•œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ,
 *   ì‹œê°„ ë³µìž¡ë„ëŠ” O(N^3)ì´ë‹¤.
 *
 *   ì´ ë¬¸ì œì—ì„œëŠ” ë°°ì—´(winners)ì— ìµœë‹¨ ê²½ë¡œë¥¼ ì €ìž¥í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ìŠ¹ë¦¬ ì—¬ë¶€ë¥¼ ì €ìž¥í•œë‹¤.
 *   ì¦‰, "Aê°€ Bë¥¼ ì´ê¸°ê³ , Bê°€ Cë¥¼ ì´ê¸°ë©´, AëŠ” Cë¥¼ ì´ê¸´ë‹¤."
 *   ë¼ëŠ” ì›ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ ìŠ¹ë¦¬ì—¬ë¶€ë¥¼ ê°±ì‹ í•œë‹¤.
 *
 *   ê·¸ë¦¬ê³  ìœ„ì—ì„œ ê°±ì‹ í•œ winnersë¥¼ ìˆœíšŒí•˜ì—¬,
 *   ê°ê°ì˜ ì„ ìˆ˜ë“¤ì´ ë‹¤ë¥¸ ëª¨ë“  ì„ ìˆ˜ì™€ ìˆœìœ„ë¥¼ ë§¤ê¸¸ ìˆ˜ ìžˆëŠ”ì§€ì— ëŒ€í•œ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤.
 *   (ë‘ ì„ ìˆ˜ ì¤‘, í•œ ëª…ì´ë¼ë„ ìŠ¹ë¦¬í–ˆëŠ”ì§€ì— ëŒ€í•œ ì—¬ë¶€ë¡œ íŒë‹¨í•œë‹¤.)
 *
 * - ì²˜ìŒì—ëŠ”,
 *   ê²½ê¸° ê²°ê³¼ë¥¼ ê°€ì§€ê³  ê° ì„ ìˆ˜ë§ˆë‹¤ (ì´ê¸´ ê²½ê¸° + ì§„ ê²½ê¸°)ë¥¼ ê³„ì‚°í•˜ì—¬
 *   ì •í™•í•˜ê²Œ ìˆœìœ„ë¥¼ ë§¤ê¸¸ ìˆ˜ ìžˆëŠ” ì„ ìˆ˜ë¥¼ êµ¬í•˜ê³ ìž í–ˆë‹¤.
 *   Aê°€ Bë¥¼ ì´ê²¼ì„ ë•Œ, Aë¥¼ ì´ê¸´ ì„ ìˆ˜ë“¤ì˜ ì´ê¸´ ê²½ê¸° ì •ë³´ì— Bë¥¼ ì¶”ê°€,
 *   Bì—ê²Œ ì§„ ì„ ìˆ˜ë“¤ì˜ ì§„ ê²½ê¸° ì •ë³´ì— Aë¥¼ ì¶”ê°€í•˜ëŠ” ë“±,
 *   ê³ ë ¤í•´ì•¼ í•˜ëŠ” ì‚¬í•­ì´ ë§Žë‹¤ë³´ë‹ˆ ì½”ë“œê°€ ë³µìž¡í•´ì ¸ì„œ ì¤‘ê°„ì— í¬ê¸°í–ˆë‹¤. ðŸ˜…
 *
 * - ë‘ ë²ˆì§¸ë¡œ ë„ì „í•œ í’€ì´ ë°©ë²•ì€,
 *   ì´ê¸´ ê²½ê¸°ì— ëŒ€í•œ ë°°ì—´ê³¼ ì§„ ê²½ê¸°ì— ëŒ€í•œ ë°°ì—´ì„ ë³„ë„ë¡œ ì €ìž¥í•œë‹¤.
 *   ê·¸ë¦¬ê³  1~Nê¹Œì§€ì˜ ì„ ìˆ˜ë“¤ì„ ìˆœíšŒí•˜ì—¬, DFS íƒìƒ‰ìœ¼ë¡œ í•´ë‹¹ ì„ ìˆ˜ì—ê²Œ ì´ê¸´ ì„ ìˆ˜, ì§„ ì„ ìˆ˜ê°€ ëª‡ ëª…ì¸ì§€ êµ¬í•œë‹¤.
 *   ì „ì²´ í•©ì´ N-1ì¸ ê²½ìš°, í•´ë‹¹ ì„ ìˆ˜ì˜ ìˆœìœ„ë¥¼ ë§¤ê¸¸ ìˆ˜ ìžˆìŒì„ ì˜ë¯¸í•œë‹¤.
 *
 *   ì¤‘ê°„ì— ê¼¬ì—¬ì„œ í¬ê¸°í–ˆì§€ë§Œ, ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œë„ í’€ ìˆ˜ ìžˆë‹¤!
 *
 * - í”Œë¡œì´ë“œ ì›Œì…œì— ëŒ€í•œ ì•„ì´ë””ì–´ëŠ” ížŒíŠ¸ë¥¼ ë³´ê³  ìƒê°í•´ë‚¸ ê²ƒì´ë‹¤.
 *   ì•Œê³ ë¦¬ì¦˜ ìžì²´ëŠ” ì–´ë µì§€ ì•Šì§€ë§Œ, ì´ëŸ° ì•„ì´ë””ì–´ë¥¼ êµ¬ìƒí•˜ëŠ” ê²ƒì´ ì–´ë ¤ì› ë˜ ë¬¸ì œì˜€ë‹¤.. ðŸ˜‚
 *
 */

function solution(n, results) {
    const winners = createWinnersInfo(n, results);

    floydWarshall(winners);

    return winners.filter((_, player) => isAllRanked(player, winners)).length;
}

function createWinnersInfo(n, results) {
    const winners = Array.from(Array(n), () => Array(n).fill(false));

    results.forEach(
        ([winner, loser]) => (winners[winner - 1][loser - 1] = true),
    );

    return winners;
}

function floydWarshall(winners) {
    const numberOfPlayers = winners.length;
    for (let k = 0; k < numberOfPlayers; k++) {
        for (let i = 0; i < numberOfPlayers; i++) {
            for (let j = 0; j < numberOfPlayers; j++) {
                if (winners[i][k] && winners[k][j]) winners[i][j] = true;
            }
        }
    }
}

const isAllRanked = (player, winners) =>
    winners[player].every(
        (_, other) => player === other || hasAnyoneWon(winners, player, other),
    );

const hasAnyoneWon = (winners, player, other) =>
    winners[player][other] || winners[other][player];

/****** TEST CASE *******/
console.log(
    solution(5, [
        [4, 3],
        [4, 2],
        [3, 2],
        [1, 2],
        [2, 5],
    ]),
);

console.log(
    solution(7, [
        [6, 1],
        [6, 3],
        [1, 2],
        [4, 2],
        [3, 2],
        [2, 5],
        [5, 7],
        [1, 3],
        [3, 4],
    ]),
);
